# ADP å¤šAgentååŒ MCP æœåŠ¡

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäº MCP åè®®çš„å¤šAgentååŒæœåŠ¡ï¼Œèƒ½å¤Ÿï¼š
- ğŸ” è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·é—®é¢˜æ¶‰åŠçš„é¢†åŸŸ
- âœ‚ï¸ å°†å¤æ‚é—®é¢˜æ‹†è§£ä¸ºå¤šä¸ªå­é—®é¢˜
- ğŸš€ å¹¶è¡Œè°ƒç”¨å¤šä¸ªä¸“ä¸š Agent
- ğŸ“ æ•´åˆç­”æ¡ˆè¿”å›ç»Ÿä¸€ç»“æœ

## ğŸ—ï¸ æ¶æ„è®¾è®¡

```
ç”¨æˆ·æé—®
    â†“
ã€æ„å›¾è¯†åˆ«ä¸æ‹†è§£å±‚ã€‘
    â†“
ã€è·¯ç”±åˆ†å‘å±‚ã€‘(å¹¶è¡Œè°ƒç”¨)
    â”œâ”€ è´¢åŠ¡Agent
    â”œâ”€ äººåŠ›Agent
    â””â”€ ç ”å‘Agent
    â†“
ã€ç»“æœæ±‡æ€»å±‚ã€‘
    â†“
è¿”å›ç»Ÿä¸€ç­”å¤
```

## ğŸ“¦ é¡¹ç›®ç»“æ„

```
adp-mcp-orchestrator/
â”œâ”€â”€ index.py              # äº‘å‡½æ•°å…¥å£
â”œâ”€â”€ orchestrator.py       # æ ¸å¿ƒç¼–æ’é€»è¾‘
â”œâ”€â”€ agents_config.py      # Agenté…ç½®
â”œâ”€â”€ requirements.txt      # ä¾èµ–
â”œâ”€â”€ serverless.yml        # éƒ¨ç½²é…ç½®
â””â”€â”€ README.md            # è¯´æ˜æ–‡æ¡£
```

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ–¹å¼ä¸€ï¼šé€šè¿‡è…¾è®¯äº‘æ§åˆ¶å°éƒ¨ç½²

1. **å‡†å¤‡ä»£ç åŒ…**
   ```bash
   cd adp-mcp-orchestrator
   zip -r function.zip .
   ```

2. **ç™»å½•è…¾è®¯äº‘æ§åˆ¶å°**
   - è®¿é—® https://console.cloud.tencent.com/scf
   - åˆ›å»ºå‡½æ•°

3. **é…ç½®å‡½æ•°**
   - å‡½æ•°åç§°ï¼š`adp-mcp-orchestrator`
   - è¿è¡Œç¯å¢ƒï¼š`Python 3.9`
   - ä¸Šä¼ ä»£ç åŒ…ï¼š`function.zip`
   - æ‰§è¡Œæ–¹æ³•ï¼š`index.main_handler`
   - å†…å­˜ï¼š512MB
   - è¶…æ—¶æ—¶é—´ï¼š30ç§’

4. **é…ç½®è§¦å‘å™¨**
   - è§¦å‘æ–¹å¼ï¼š`APIç½‘å…³`
   - è¯·æ±‚æ–¹æ³•ï¼š`POST`
   - å‘å¸ƒç¯å¢ƒï¼š`å‘å¸ƒ`
   - å‹¾é€‰"å¯ç”¨é›†æˆå“åº”"

5. **è·å–è®¿é—®åœ°å€**
   - å¤åˆ¶ API ç½‘å…³çš„è®¿é—® URL
   - æ ¼å¼ï¼š`https://service-xxx.gz.apigw.tencentcs.com/release/mcp`

### æ–¹å¼äºŒï¼šé€šè¿‡ Serverless Framework éƒ¨ç½²

1. **å®‰è£… Serverless Framework**
   ```bash
   npm install -g serverless
   ```

2. **é…ç½®è…¾è®¯äº‘å¯†é’¥**
   ```bash
   serverless credentials set \
     --provider tencent \
     --key YOUR_SECRET_ID \
     --secret YOUR_SECRET_KEY
   ```

3. **éƒ¨ç½²**
   ```bash
   cd adp-mcp-orchestrator
   serverless deploy
   ```

4. **æŸ¥çœ‹éƒ¨ç½²ç»“æœ**
   - éƒ¨ç½²æˆåŠŸåä¼šæ˜¾ç¤º API ç½‘å…³åœ°å€

## âš™ï¸ é…ç½®è¯´æ˜

### ä¿®æ”¹ Agent é…ç½®

ç¼–è¾‘ `agents_config.py`ï¼Œæ›¿æ¢ä¸ºå®é™…çš„ ADP åº”ç”¨IDï¼š

```python
AGENTS = {
    "finance": {
        "name": "è´¢åŠ¡Agent",
        "description": "å¤„ç†è´¢åŠ¡ã€ç»è¥ã€æˆæœ¬ã€é¢„ç®—ã€æŠ¥é”€ç­‰é—®é¢˜",
        "app_id": "your-actual-finance-app-id"
    },
    "hr": {
        "name": "äººåŠ›Agent",
        "description": "å¤„ç†äººå‘˜ã€æ‹›è˜ã€è€ƒå‹¤ã€è–ªèµ„ã€ç»©æ•ˆç­‰é—®é¢˜",
        "app_id": "your-actual-hr-app-id"
    },
    "dev": {
        "name": "ç ”å‘Agent",
        "description": "å¤„ç†é¡¹ç›®è¿›åº¦ã€æŠ€æœ¯æ–¹æ¡ˆã€ä»£ç ã€bugç­‰é—®é¢˜",
        "app_id": "your-actual-dev-app-id"
    }
}
```

## ğŸ”— åœ¨ Knot ä¸­é…ç½®

### æ–¹å¼ä¸€ï¼šé€šè¿‡ MCP ç›´æ¥é…ç½®

```json
{
  "mcpServers": {
    "adp-orchestrator": {
      "url": "https://your-cloud-function-url/mcp",
      "transportType": "http",
      "headers": {
        "Content-Type": "application/json"
      },
      "timeout": 60000
    }
  }
}
```

### æ–¹å¼äºŒï¼šé€šè¿‡ Skill é…ç½®ï¼ˆæ¨èï¼‰

åˆ›å»ºä¸€ä¸ª Skill æ–‡ä»¶ï¼Œè®©ä¸» Agent çŸ¥é“å¦‚ä½•ä½¿ç”¨è¿™ä¸ª MCPï¼š

**multi-agent-skill.md**
```markdown
# å¤šAgentååŒå¯¹è¯æŠ€èƒ½

## ä½•æ—¶ä½¿ç”¨

å½“ç”¨æˆ·çš„é—®é¢˜æ¶‰åŠå¤šä¸ªé¢†åŸŸï¼ˆè´¢åŠ¡ã€äººåŠ›ã€ç ”å‘ç­‰ï¼‰æ—¶ï¼Œä½¿ç”¨æ­¤æŠ€èƒ½ã€‚

## ä½¿ç”¨æ–¹æ³•

è°ƒç”¨ MCP å·¥å…· `multi_agent_chat`ï¼Œä¼ å…¥ä»¥ä¸‹å‚æ•°ï¼š
- question: ç”¨æˆ·çš„å®Œæ•´é—®é¢˜
- app_key: ADP AppKeyï¼ˆä»ç”¨æˆ·å¤„è·å–æˆ–ä½¿ç”¨é»˜è®¤å€¼ï¼‰

## ç¤ºä¾‹

ç”¨æˆ·é—®ï¼š"å…¬å¸çš„ç»è¥æƒ…å†µæ€ä¹ˆæ ·ï¼Ÿå…¬å¸æœ‰å¤šå°‘äººï¼Ÿç ”å‘çš„è¿›åº¦æ€ä¹ˆæ ·ï¼Ÿ"

è°ƒç”¨ï¼š
```json
{
  "tool": "multi_agent_chat",
  "arguments": {
    "question": "å…¬å¸çš„ç»è¥æƒ…å†µæ€ä¹ˆæ ·ï¼Ÿå…¬å¸æœ‰å¤šå°‘äººï¼Ÿç ”å‘çš„è¿›åº¦æ€ä¹ˆæ ·ï¼Ÿ",
    "app_key": "user-provided-app-key"
  }
}
```

ç³»ç»Ÿä¼šï¼š
1. è‡ªåŠ¨æ‹†è§£ä¸º3ä¸ªå­é—®é¢˜
2. åˆ†åˆ«è°ƒç”¨è´¢åŠ¡ã€äººåŠ›ã€ç ”å‘Agent
3. æ•´åˆç­”æ¡ˆè¿”å›
```

## ğŸ§ª æµ‹è¯•

### æœ¬åœ°æµ‹è¯•

```bash
# æ¨¡æ‹Ÿäº‘å‡½æ•°è°ƒç”¨
python -c "
import json
from index import main_handler

event = {
    'body': json.dumps({
        'method': 'tools/list'
    })
}

result = main_handler(event, None)
print(json.dumps(result, indent=2, ensure_ascii=False))
"
```

### API æµ‹è¯•

```bash
curl -X POST https://your-cloud-function-url/mcp \
  -H "Content-Type: application/json" \
  -d '{
    "method": "tools/call",
    "params": {
      "name": "multi_agent_chat",
      "arguments": {
        "question": "å…¬å¸çš„ç»è¥æƒ…å†µæ€ä¹ˆæ ·ï¼Ÿ",
        "app_key": "your-app-key"
      }
    }
  }'
```

## ğŸ“Š ç›‘æ§ä¸æ—¥å¿—

åœ¨è…¾è®¯äº‘æ§åˆ¶å°æŸ¥çœ‹ï¼š
- è°ƒç”¨æ¬¡æ•°
- é”™è¯¯ç‡
- æ‰§è¡Œæ—¶é•¿
- è¯¦ç»†æ—¥å¿—

## ğŸ’¡ æœ€ä½³å®è·µ

1. **AppKey ç®¡ç†**
   - å»ºè®®è®©ç”¨æˆ·åœ¨è°ƒç”¨æ—¶æä¾› AppKey
   - ä¹Ÿå¯ä»¥é…ç½®é»˜è®¤ AppKey

2. **è¶…æ—¶æ§åˆ¶**
   - äº‘å‡½æ•°è¶…æ—¶æ—¶é—´å»ºè®®è®¾ç½®ä¸º 30-60 ç§’
   - å•ä¸ª Agent è°ƒç”¨è¶…æ—¶è®¾ç½®ä¸º 60 ç§’

3. **é”™è¯¯å¤„ç†**
   - å•ä¸ª Agent å¤±è´¥ä¸å½±å“å…¶ä»– Agent
   - æœ€ç»ˆæ±‡æ€»æ—¶ä¼šæ ‡æ³¨å¤±è´¥ä¿¡æ¯

4. **æˆæœ¬ä¼˜åŒ–**
   - è…¾è®¯äº‘å‡½æ•°æ¯æœˆ 100 ä¸‡æ¬¡å…è´¹è°ƒç”¨
   - å¹¶è¡Œè°ƒç”¨å¯å‡å°‘æ€»è€—æ—¶

## ğŸ”§ æ•…éšœæ’æŸ¥

### é—®é¢˜1ï¼šéƒ¨ç½²å¤±è´¥
- æ£€æŸ¥ `requirements.txt` æ˜¯å¦æ­£ç¡®
- ç¡®è®¤è¿è¡Œç¯å¢ƒä¸º Python 3.9

### é—®é¢˜2ï¼šè°ƒç”¨è¶…æ—¶
- å¢åŠ äº‘å‡½æ•°è¶…æ—¶æ—¶é—´
- æ£€æŸ¥ Agent å“åº”é€Ÿåº¦

### é—®é¢˜3ï¼šAgent è°ƒç”¨å¤±è´¥
- ç¡®è®¤ `agents_config.py` ä¸­çš„ app_id æ­£ç¡®
- æ£€æŸ¥ AppKey æ˜¯å¦æœ‰æ•ˆ

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2026-02-15)
- âœ… åˆå§‹ç‰ˆæœ¬
- âœ… æ”¯æŒé—®é¢˜æ‹†è§£
- âœ… æ”¯æŒå¹¶è¡Œè°ƒç”¨
- âœ… æ”¯æŒç»“æœæ±‡æ€»

## ğŸ“„ è®¸å¯è¯

MIT License
